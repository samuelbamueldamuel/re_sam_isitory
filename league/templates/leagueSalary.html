<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'tablestyle.css' %}">

</head>
<body>
<div class="table-wrapper">

<table class="templatetable">
    <tr>
        {% include 'sidebar.html' %}
        
        <td colspan="2"; class="header">
            TeamCity TeamName
        </td>
    </tr>

    <tr>
        <td class="main-body">
            <table>
                <tr>
                    <th>City</th>
                    <th>Name</th>
                    <th>Players</th>
                    <th>Total Salary</th>
                </tr>

                {% for team in teams %}
                {% load playersCount salaryCount %}
                

                <tr>
                    <td>{{team.city}}</td>
                    <td><a href="{% url 'salaryBreakdownL' t_id=team.t_id %}">{{team.name}}</a></td>
                    <td>{% playersCount team.t_id %}</td>
                    <td>{% salaryCount team.t_id %}</td>
                </tr>

                {% endfor %}
            </table>
        </td>
    </tr>
</table>
</div>



<h1>Team Details</h1>

    {% if teams %}
        {% for team in teams %}
            <h2>{{ team.name }}</h2>
            <p>City: {{ team.city }}</p>

            {% salaryCount team.t_id %}

            {% with teamSalary=team.teamsalary_set.first %}
                {% if teamSalary %}
                    <p>Total Salary (from TeamSalary model): ${{ teamSalary.total_salary }}</p>
                {% else %}
                    <p>No salary data available for this team in the TeamSalary model.</p>
                {% endif %}
            {% endwith %}

            <h3>Players</h3>
            <ul>
                {% for player in players %}
                    <li>{{ player.name }} - ${{ player.salary }}</li>
                {% endfor %}
            </ul>
        {% endfor %}
    {% else %}
        <p>No teams found.</p>
    {% endif %}




</body>

</html>